<!doctype html>
<html lang="bn">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Slap Game</title>

  <style>
    *{box-sizing:border-box}
    body{
      margin:0;
      min-height:100vh;
      display:flex;
      justify-content:center;
      align-items:center;
      background:#0f0f12;
      font-family:system-ui,Segoe UI,sans-serif;
      color:#fff;
      -webkit-user-select:none;
      user-select:none;
      -webkit-tap-highlight-color:transparent;
    }

    .app{
      width:min(420px,94vw);
      background:#17171c;
      border-radius:18px;
      padding:16px;
      box-shadow:0 20px 50px rgba(0,0,0,.5);
    }

    h1{
      margin:0 0 10px;
      text-align:center;
      font-size:20px;
    }

    .hud{
      display:flex;
      justify-content:space-between;
      margin-bottom:12px;
    }

    .box{
      background:#0c0c0f;
      padding:10px;
      border-radius:12px;
      width:32%;
      text-align:center;
    }

    .box small{color:#aaa;font-size:12px}
    .box b{font-size:18px}

    .playArea{
      margin-top:10px;
      height:340px;
      border-radius:18px;
      background:#111;
      display:flex;
      justify-content:center;
      align-items:center;
      position:relative;
      overflow:hidden;
      touch-action:none;
    }

    .target{
      width:220px;
      height:220px;
      border-radius:28px;
      overflow:hidden;
      box-shadow:0 20px 60px rgba(0,0,0,.6);
    }

    .target img{
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
    }

    .flash{
      position:absolute;
      inset:0;
      background:rgba(255,0,0,.25);
      opacity:0;
      pointer-events:none;
    }

    .shake{
      animation:shake .18s linear;
    }

    @keyframes shake{
      0%{transform:translate(0)}
      25%{transform:translate(4px,-3px)}
      50%{transform:translate(-4px,3px)}
      75%{transform:translate(3px,3px)}
      100%{transform:translate(0)}
    }

    button{
      width:100%;
      margin-top:12px;
      padding:12px;
      border:none;
      border-radius:14px;
      background:#00ADEF;
      font-weight:800;
      cursor:pointer;
    }

    button:active{transform:translateY(1px)}

    .overlay{
      position:fixed;
      inset:0;
      background:rgba(0,0,0,.6);
      display:none;
      justify-content:center;
      align-items:center;
    }

    .overlay.show{display:flex}

    .result{
      background:#17171c;
      padding:20px;
      border-radius:18px;
      text-align:center;
      width:min(360px,90vw);
    }
  </style>
</head>
<body>

<div class="app">
  <h1>üî• Slap Game üî•</h1>

  <div class="hud">
    <div class="box">
      <small>‡¶∏‡¶Æ‡ßü</small><br>
      <b id="time">01:00</b>
    </div>
    <div class="box">
      <small>‡¶•‡¶æ‡¶™‡ßç‡¶™‡ßú</small><br>
      <b id="score">0</b>
    </div>
    <div class="box">
      <small>‡¶∏‡ßá‡¶∞‡¶æ</small><br>
      <b id="best">0</b>
    </div>
  </div>

  <div class="playArea" id="playArea">
    <div class="flash" id="flash"></div>
    <div class="target" id="target">
      <img id="targetImg">
    </div>
  </div>

  <button id="restart">‚ñ∂ ‡¶∂‡ßÅ‡¶∞‡ßÅ / ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ñ‡ßá‡¶≤‡ßÅ‡¶®</button>
</div>

<div class="overlay" id="overlay">
  <div class="result">
    <h2>‚è∞ ‡¶∏‡¶Æ‡ßü ‡¶∂‡ßá‡¶∑!</h2>
    <p>‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶∏‡ßç‡¶ï‡ßã‡¶∞: <b id="finalScore">0</b></p>
    <button onclick="location.reload()">‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ñ‡ßá‡¶≤‡ßÅ‡¶®</button>
  </div>
</div>

<script>
  const IDLE_IMG = "https://files.catbox.moe/n5tdgb.jpg";
  const SLAP_IMG = "https://files.catbox.moe/jdabf7.jpg";

  const imgIdle = new Image();
  const imgSlap = new Image();
  imgIdle.src = IDLE_IMG;
  imgSlap.src = SLAP_IMG;

  const target = document.getElementById("target");
  const targetImg = document.getElementById("targetImg");
  const flash = document.getElementById("flash");

  const scoreEl = document.getElementById("score");
  const timeEl = document.getElementById("time");
  const bestEl = document.getElementById("best");
  const overlay = document.getElementById("overlay");
  const finalScore = document.getElementById("finalScore");
  const restartBtn = document.getElementById("restart");
  const playArea = document.getElementById("playArea");

  let score = 0;
  let time = 60;
  let running = false;
  let timer = null;
  let slapTimeout = null;

  targetImg.src = imgIdle.src;

  bestEl.textContent = localStorage.getItem("bestSlap") || 0;

  function startGame(){
    score = 0;
    time = 60;
    running = true;
    scoreEl.textContent = 0;
    timeEl.textContent = "01:00";
    targetImg.src = imgIdle.src;
    overlay.classList.remove("show");

    clearInterval(timer);
    timer = setInterval(()=>{
      time--;
      timeEl.textContent = "00:" + String(time).padStart(2,"0");
      if(time <= 0){
        endGame();
      }
    },1000);
  }

  function endGame(){
    running = false;
    clearInterval(timer);

    finalScore.textContent = score;

    const best = Math.max(score, localStorage.getItem("bestSlap") || 0);
    localStorage.setItem("bestSlap", best);
    bestEl.textContent = best;

    overlay.classList.add("show");
  }

  function slap(){
    if(!running) return;

    score++;
    scoreEl.textContent = score;

    flash.style.opacity = 1;
    setTimeout(()=>flash.style.opacity=0,60);

    target.classList.remove("shake");
    void target.offsetWidth;
    target.classList.add("shake");

    targetImg.src = imgSlap.src;
    clearTimeout(slapTimeout);
    slapTimeout = setTimeout(()=>{
      targetImg.src = imgIdle.src;
    },130);
  }

  playArea.addEventListener("pointerdown", e=>{
    e.preventDefault();
    slap();
  },{passive:false});

  restartBtn.onclick = startGame;
</script>

</body>
      </html>
