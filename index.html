<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Washiq Adnan | AI Portfolio</title>
  
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&display=swap');
    :root { --primary: #00d2ff; --dark: #020617; }
    body { font-family: 'Space Grotesk', sans-serif; background-color: var(--dark); color: #fff; overflow-x: hidden; }
    #particles-js { position: fixed; width: 100%; height: 100%; z-index: -1; }
    .glass-card { background: rgba(255, 255, 255, 0.03); backdrop-filter: blur(15px); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 24px; }
    
    #chat-window { transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); transform: translateY(20px); opacity: 0; pointer-events: none; }
    #chat-window.active { transform: translateY(0); opacity: 1; pointer-events: auto; }
    .msg-user { background: linear-gradient(135deg, #3a7bd5, #00d2ff); color: white; border-radius: 15px 15px 2px 15px; margin-left: auto; }
    .msg-bot { background: rgba(255,255,255,0.08); color: #e2e8f0; border-radius: 15px 15px 15px 2px; border: 1px solid rgba(255,255,255,0.1); }
    .typing-dot { width: 4px; height: 4px; background: #00d2ff; border-radius: 50%; animation: blink 1.4s infinite both; }
    @keyframes blink { 0%, 80%, 100% { opacity: 0; } 40% { opacity: 1; } }
  </style>
</head>
<body>

  <div id="particles-js"></div>

  <section class="min-h-screen flex flex-col items-center justify-center px-6 text-center">
    <div class="mb-8" data-aos="zoom-in">
      <img src="https://files.catbox.moe/x0uu6r.jpg" class="w-32 h-32 rounded-full border-4 border-cyan-500 shadow-xl object-cover">
    </div>
    <h1 class="text-4xl md:text-6xl font-extrabold mb-4">
      <span id="type-text" class="text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500"></span>
    </h1>
    <p class="text-slate-400 text-sm tracking-[0.4em] uppercase mb-10">Washiq Adnan - Developer & Creator</p>
    <button onclick="openChat()" class="bg-blue-600 hover:bg-blue-700 px-8 py-4 rounded-full font-bold transition-all shadow-lg">
        Talk to Raha AI
    </button>
  </section>

  <div class="fixed bottom-6 right-6 z-[1000] flex flex-col items-end">
    <div id="chat-window" class="glass-card w-[320px] md:w-[380px] h-[500px] mb-4 flex flex-col overflow-hidden border-cyan-500/40 shadow-2xl">
      <div class="p-4 bg-white/5 border-b border-white/10 flex items-center justify-between">
        <div class="flex items-center gap-3">
          <img src="https://files.catbox.moe/x0uu6r.jpg" class="w-10 h-10 rounded-full border border-cyan-500/50">
          <div>
            <h3 class="text-sm font-bold">Raha AI (Live)</h3>
            <p class="text-[9px] text-green-400 font-bold uppercase">Created by Washiq</p>
          </div>
        </div>
        <button onclick="toggleChat()" class="text-slate-400"><i class="fas fa-times"></i></button>
      </div>

      <div id="chat-body" class="flex-1 overflow-y-auto p-4 space-y-4 text-[13px]">
        <div class="msg-bot p-3 max-w-[85%]">
            আসসালামু আলাইকুম! আমি <b>রাহা এআই</b>। ওয়াশিকের পোর্টফোলিওতে আপনাকে স্বাগতম! আমি কি সাহায্য করতে পারি?
        </div>
      </div>

      <div id="typing" class="hidden px-6 py-2 flex gap-1 mb-2">
        <div class="typing-dot"></div>
        <div class="typing-dot" style="animation-delay: 0.2s"></div>
        <div class="typing-dot" style="animation-delay: 0.4s"></div>
      </div>

      <div class="p-4 bg-white/5 border-t border-white/10 flex gap-2">
        <input type="text" id="chat-input" placeholder="Type a message..." class="bg-white/5 border border-white/10 rounded-xl px-4 py-2 w-full text-sm focus:outline-none text-white">
        <button onclick="sendMessage()" class="bg-cyan-600 w-10 h-10 rounded-xl flex items-center justify-center">
          <i class="fas fa-paper-plane text-xs"></i>
        </button>
      </div>
    </div>

    <button onclick="toggleChat()" class="w-16 h-16 bg-gradient-to-tr from-blue-600 to-cyan-400 rounded-full shadow-2xl flex items-center justify-center text-white text-2xl">
      <i class="fas fa-comment-dots"></i>
    </button>
  </div>

  <script>
    AOS.init({ duration: 1000, once: true });
    
    // Typewriter
    const textStr = "Hi, I'm Washiq Adnan";
    let charIdx = 0;
    function typeEffect() { if(charIdx < textStr.length) { document.getElementById("type-text").innerHTML += textStr.charAt(charIdx); charIdx++; setTimeout(typeEffect, 100); } }
    window.onload = typeEffect;

    // Particles
    particlesJS("particles-js", { particles: { number: { value: 40 }, color: { value: "#00d2ff" }, opacity: { value: 0.2 }, size: { value: 2 }, line_linked: { enable: true, distance: 150, color: "#00d2ff", opacity: 0.1, width: 1 }, move: { enable: true, speed: 1 } } });

    const chatWindow = document.getElementById('chat-window');
    const chatBody = document.getElementById('chat-body');
    const chatInput = document.getElementById('chat-input');
    const typing = document.getElementById('typing');

    function toggleChat() { chatWindow.classList.toggle('active'); }
    function openChat() { chatWindow.classList.add('active'); chatInput.focus(); }

    async function sendMessage() {
      const userMsg = chatInput.value.trim();
      if(!userMsg) return;

      appendMessage(userMsg, 'user');
      chatInput.value = "";
      typing.classList.remove('hidden');
      chatBody.scrollTop = chatBody.scrollHeight;

      try {
        // ১. প্রথমে তোমার মেইন API ট্রাই করবে (মেসেঞ্জার বটের জন্য যা তৈরি করেছিলে)
        const targetUrl = `https://betadash-api-swordslush-production.up.railway.app/you?chat=${encodeURIComponent(userMsg)}`;
        const proxy = "https://api.allorigins.win/get?url=";
        
        const response = await fetch(proxy + encodeURIComponent(targetUrl));
        const data = await response.json();
        const finalData = JSON.parse(data.contents);

        if (finalData.response) {
            handleReply(finalData.response);
        } else {
            throw new Error("No response from primary");
        }
      } catch (err) {
        // ২. যদি মেইন API কাজ না করে, তবে এই ব্যাকআপ API রিপ্লাই দিবে (স্মার্ট সিস্টেম)
        try {
            const fallback = await fetch(`https://api.simsimi.vn/v2/simsimi?text=${encodeURIComponent(userMsg)}&lc=bn`);
            const fallbackData = await fallback.json();
            handleReply(fallbackData.result || "আমি বুঝতে পেরেছি, ওয়াশিককে মেসেঞ্জারে জানান!");
        } catch (fErr) {
            handleReply("দুঃখিত, বর্তমানে সার্ভার কানেকশনে সমস্যা হচ্ছে।");
        }
      }
    }

    function handleReply(reply) {
      typing.classList.add('hidden');
      appendMessage(reply, 'bot');
    }

    function appendMessage(txt, side) {
      const bubble = document.createElement('div');
      bubble.className = `p-3 max-w-[85%] ${side === 'user' ? 'msg-user' : 'msg-bot'}`;
      bubble.innerHTML = txt;
      chatBody.appendChild(bubble);
      chatBody.scrollTop = chatBody.scrollHeight;
    }

    chatInput.addEventListener("keypress", (e) => { if(e.key === "Enter") sendMessage(); });
  </script>
</body>
</html>
